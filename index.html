<!DOCTYPE html> 
 <html> 
 <head> 
   <base href="/chatweb/"> 
 
   <meta charset="UTF-8"> 
   <meta content="IE=Edge" http-equiv="X-UA-Compatible"> 
   <meta name="description" content="Chat App"> 
 
   <meta name="apple-mobile-web-app-capable" content="yes"> 
   <meta name="apple-mobile-web-app-status-bar-style" content="black"> 
   <meta name="apple-mobile-web-app-title" content="Chat"> 
   <link rel="apple-touch-icon" href="icons/Icon-192.png"> 
 
   <link rel="icon" type="image/png" href="favicon.png"/> 
 
   <title>Chat App</title> 
   <link rel="manifest" href="manifest.json"> 
 
   <style> 
     /* Estilo para a tela de carregamento inicial */ 
     .loading { 
       display: flex; 
       justify-content: center; 
       align-items: center; 
       margin: 0; 
       position: absolute; 
       top: 50%; 
       left: 50%; 
       transform: translate(-50%, -50%); 
     } 
     .loader { 
       border: 6px solid #f3f3f3; 
       border-radius: 50%; 
       border-top: 6px solid #3498db; 
       width: 40px; 
       height: 40px; 
       animation: spin 1s linear infinite; 
     } 
     @keyframes spin { 
       0% { transform: rotate(0deg); } 
       100% { transform: rotate(360deg); } 
     } 
     body { 
       background-color: #ffffff; 
     } 
   </style> 
   <!-- OneSignal SDK -->
   <script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
 </head> 
 <body> 
   <div class="loading" id="loading-indicator"> 
     <div class="loader"></div> 
   </div> 
 
   <!-- Flutter scripts -->
   <script src="flutter.js" defer></script>
   <script src="flutter_bootstrap.js" async></script> 
   
   <script> 
     // Inicialização do OneSignal em segundo plano
     window.OneSignalDeferred = window.OneSignalDeferred || [];
     OneSignalDeferred.push(async function(OneSignal) {
       try {
         await OneSignal.init({
           appId: "61e6874c-bca0-4628-ad07-8053c0cd499e",
           serviceWorkerPath: "OneSignalSDK.sw.js",
           allowLocalhostAsSecureOrigin: true,
         });
       } catch (e) {
         console.warn('OneSignal init delayed/failed:', e);
       }
     });

     window.addEventListener('load', function(ev) { 
       // Força o renderizador HTML 
       window.flutterWebRenderer = "html"; 
 
       // Download engine e inicialização v2 
       _flutter.loader.loadEntrypoint({ 
         serviceWorker: { 
           timeoutMillis: 4000, 
           serviceWorkerVersion: typeof serviceWorkerVersion !== 'undefined' ? serviceWorkerVersion : null, 
         }, 
         onEntrypointLoaded: function(engineInitializer) { 
           engineInitializer.initializeEngine().then(function(appRunner) { 
             // Remove o loader assim que o motor estiver pronto 
             const indicator = document.getElementById('loading-indicator');
             if (indicator) indicator.remove(); 
             appRunner.runApp(); 
           }); 
         } 
       }); 
     }); 
   </script> 
 </body> 
 </html>
